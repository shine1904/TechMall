<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="icon" type="image/x-icon" href="favicon.ico">
    <link rel="stylesheet" href="styles.css">
    <title>ÄÄƒng kÃ½</title>
</head>
<body>
    <!-- Header -->
     <header class="header">
    <div class="container header-inner" aria-label="Trang chá»§">
      <a class="logo" href="index.html">
        <span class="logo-badge">Tech</span><span class="logo-text">Mall</span>
      </a>

      

      <form class="search-box" action="#" method="get" role="search" aria-label="TÃ¬m kiáº¿m">
        <input name="q" type="text" placeholder="Báº¡n muá»‘n tÃ¬m gÃ¬? (VÃ­ dá»¥: iPhone 15, Galaxy S24...)" aria-label="Ã” tÃ¬m kiáº¿m">
        <button type="submit" aria-label="TÃ¬m kiáº¿m">ğŸ”</button>
      </form>

      <nav class="quick-links">
        <a href="#" class="quick-item" aria-label="Tra cá»©u Ä‘Æ¡n hÃ ng">ğŸ§¾ ÄÆ¡n hÃ ng</a>
        <a href="cart.html" class="quick-item" aria-label="Giá» hÃ ng">ğŸ›’ Giá» hÃ ng</a>
         <a href="login.html" id="btnAccount" class="quick-item" aria-label="TÃ i khoáº£n">ğŸ‘¤ TÃ i khoáº£n</a>

  <!-- Panel hiá»‡n khi Ä‘Ã£ Ä‘Äƒng nháº­p -->
  <div id="userPanel" class="quick-item" style="display:none;">
  ğŸ‘¤ 
  <a id="userName" href="profile.html" style="text-decoration:none; color:inherit;"></a>
  <button id="btnLogout">ÄÄƒng xuáº¥t</button>
</div>
</nav>

    <script>
document.addEventListener("DOMContentLoaded", () => {
  const user = JSON.parse(localStorage.getItem("user"));
  const btnAccount = document.getElementById("btnAccount");
  const userPanel = document.getElementById("userPanel");
  const userName = document.getElementById("userName");
  const btnLogout = document.getElementById("btnLogout");

  if (user && user.full_name) {
    // áº¨n nÃºt Ä‘Äƒng nháº­p
    if (btnAccount) btnAccount.style.display = "none";

    // Hiá»‡n panel user
    if (userName) userName.textContent = user.full_name;
    if (userPanel) userPanel.style.display = "inline-block";
  } else {
    // Náº¿u khÃ´ng cÃ³ user -> hiá»ƒn thá»‹ nÃºt Ä‘Äƒng nháº­p
    if (btnAccount) btnAccount.style.display = "inline-block";
    if (userPanel) userPanel.style.display = "none";
  }

  // ÄÄƒng xuáº¥t
  if (btnLogout) {
    btnLogout.addEventListener("click", () => {
      localStorage.clear();
      window.location.href = "login.html";
    });
  }
});
</script>

     
      
    </div>

    <!-- Category bar (desktop) -->
     <div class="category-bar">
      <div class="container cat-inner">
        <a href="showproduct1.html">Äiá»‡n thoáº¡i</a>
        <a href="showproduct2.html">Laptop</a>
        <a href="showproduct3.html">Äá»“ng há»“</a>
        <a href="showproduct4.html">Phá»¥ kiá»‡n</a>

      </div>
    </div>
  </header>

<main class="register-page">
    <div class="register-container">
        <h1>ÄÄƒng kÃ½</h1>
        <form id="register-form" action="register.php" method="post">

           
            <input type="email" id="email" name="email" placeholder="Email" required>
            <input type="text" id="phone" name="phone" placeholder="Sá»‘ Ä‘iá»‡n thoáº¡i" required>
            <input type="text" id="full_name" name="full_name" placeholder="Há» vÃ  tÃªn" required>
            <input type="text" id="address" name="address" placeholder="Äá»‹a chá»‰" required>
            <input type="password" id="password" name="password" placeholder="Password" required>
            <input type="password" id="confirm-password" name="confirm-password" placeholder="Confirm Password" required>

            <button type="submit" class="btn-primary">ÄÄƒng kÃ½</button>
            <button type="button" class="btn-secondary">
                <a href="login.html">ÄÄƒng nháº­p</a>
            </button>
        </form>
    </div>
</main>
<script>
document.getElementById("register-form").addEventListener("submit", async function(e) {
    e.preventDefault();

    const full_name = document.getElementById("full_name").value;
    const email = document.getElementById("email").value;
    const phone = document.getElementById("phone").value;
    const address = document.getElementById("address").value;
    const password = document.getElementById("password").value;
    const confirm_password = document.getElementById("confirm-password").value;

    // Kiá»ƒm tra password khá»›p nhau
    if (password !== confirm_password) {
        alert("Máº­t kháº©u nháº­p láº¡i khÃ´ng khá»›p!");
        return;
    }

   try {
    const res = await fetch("http://localhost/ecommerce_api/index.php/api/register", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ full_name, email, password, phone, address })
    });

    const data = await res.json();
    console.log("Response tá»« API:", data);

    if (res.ok && data.success) {
        alert("ÄÄƒng kÃ½ thÃ nh cÃ´ng!");
        window.location.href = "login.html";
    } else {
        // Hiá»ƒn thá»‹ lá»—i chi tiáº¿t tá»« backend
        if (data.errors) {
            let errorMsgs = Object.values(data.errors).join("\n");
            alert("Lá»—i:\n" + errorMsgs);
        } else {
            alert(data.message || "ÄÄƒng kÃ½ tháº¥t báº¡i!");
        }
    }
} catch (err) {
    console.error("Lá»—i fetch:", err);
    alert("KhÃ´ng thá»ƒ káº¿t ná»‘i tá»›i server!");
}

});
</script>

     
   <footer class="footer">
    <div class="container footer-grid">
      <div>
        <a class="logo footer-logo" href="#"><span class="logo-badge">Tech</span><span class="logo-text">Mall</span></a>
        <p class="muted">Â© 2025 TechMall. Táº¥t cáº£ cÃ¡c quyá»n Ä‘Æ°á»£c báº£o lÆ°u.</p>
        <p class="muted">Hotline: 1800 0000 (Miá»…n phÃ­)</p>
      </div>
      <div>
        <h4>Há»— trá»£ khÃ¡ch hÃ ng</h4>
        <ul class="footer-list">
          <li><a href="#">Trung tÃ¢m trá»£ giÃºp</a></li>
          <li><a href="#">HÆ°á»›ng dáº«n mua hÃ ng</a></li>
          <li><a href="#">ChÃ­nh sÃ¡ch báº£o hÃ nh</a></li>
          <li><a href="#">ChÃ­nh sÃ¡ch Ä‘á»•i tráº£</a></li>
        </ul>
      </div>
      <div>
        <h4>Vá» TechMall</h4>
        <ul class="footer-list">
          <li><a href="#">Giá»›i thiá»‡u</a></li>
          <li><a href="#">Tuyá»ƒn dá»¥ng</a></li>
          <li><a href="#">Há»‡ thá»‘ng cá»­a hÃ ng</a></li>
        </ul>
      </div>
      <div>
        <h4>Káº¿t ná»‘i vá»›i chÃºng tÃ´i</h4>
        <div class="socials">
          <a href="#" aria-label="Facebook">ğŸŒ</a>
          <a href="#" aria-label="YouTube">â–¶ï¸</a>
          <a href="#" aria-label="Zalo">ğŸ’¬</a>
        </div>
      </div>
    </div>
  </footer>
</body>


</html>